# graphql-js-client

Feature light client library for fetching resources via GraphQL

## Table Of Contents

- [Installation](#installation)
- [Examples](#examples)
- [Contributing](#contributing)
- [License](http://github.com/Shopify/graphql-js-client/blob/master/LICENSE.md)

## Installation
```bash
$ yarn install graphql-js-client
```

## Examples

`GraphQLClient` requires a "type bundle" which is a set of ES6 modules generated by [graphql-js-schema](https://github.com/Shopify/graphql-js-schema)
that represent your GraphQL schema.

#### Creating and sending a query

```javascript
import GraphQLClient from 'graphql-js-client';

// This is the generated type bundle from graphql-js-schema
import types from './types.js';

const client = new GraphQLClient(types, {
  url: 'https://graphql.myshopify.com/api/graphql',
  fetcherOptions: {
    headers: `Authorization: Basic ${btoa('some-storefront-access-token')}`
  }
});

const products = [];

client.send(client.query((root) => {
  root.add('shop', (shop) => {
    shop.add('name');
    shop.addConnection('products', {args: {first: 10}}, (product) => {
      product.add('title');
    });
  });
}).then((response) => {
  console.log(response.model);

  if (response.model.products.hasNextPage) {
    products.push(...response.model.products);

    return client.fetchNextPage(shopModel.products);
  };

// `fetchNextPage` resolves with the model you wanted the next page of
}).then((response) => {
  products.push(...response.model); // Page two of products
});
```

## Contributing

#### Setting up:

```bash
$ git clone git@github.com:Shopify/graphql-js-client.git
$ cd graphql-js-client
$ yarn install
```

#### Running the tests in a browser

```bash
$ yarn start
```

Then visit [http://localhost:4200](http://localhost:4200)

#### Running the tests in node

```bash
$ yarn test
```

## License

MIT, see [LICENSE.md](http://github.com/Shopify/graphql-js-client/blob/master/LICENSE.md) for details.

<img src="https://cdn.shopify.com/shopify-marketing_assets/builds/19.0.0/shopify-full-color-black.svg" width="200" />
